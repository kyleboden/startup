<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ApplySmart HTML</title>
    <link rel="icon" href="as.png" type="image/png"/>
    <style>
        .education-entry, .work-entry, .language-entry {
            margin-bottom: 20px;
            border: 1px solid #ccc;
            padding: 10px;
        }
    </style>
</head>
<body>

<header>
    <h1>Apply Smart User Input</h1>
</header>
<hr />

<main>
    <h2 id="welcome-message"></h2>
    <hr />
    <p>Please tell us more about you!</p>
    
    <h3>Education</h3>
    <div id="education-container">
        <!-- This container will be filled dynamically when the button is clicked -->
    </div>
    <button id="add-education">Add Education</button>

    <h3>Work History</h3>
    <div id="work-container">
        <!-- This container will be filled dynamically when the button is clicked -->
    </div>
    <button id="add-work">Add Work Entry</button>

    <h3>Skills</h3>
    <div>
        <textarea class="skill" rows="4" cols="50" placeholder="Enter your skills (comma-separated)"></textarea>
    </div>

    <h3>Languages</h3>
    <div id="language-container">
        <!-- This container will be filled dynamically when the button is clicked -->
    </div>
    <button id="add-language">Add Another Language</button>

</main>

<script>
    // Function to get URL parameters
    function getQueryParams() {
        const params = {};
        const queryString = window.location.search.slice(1);
        const pairs = queryString.split('&');
        for (const pair of pairs) {
            const [key, value] = pair.split('=');
            params[decodeURIComponent(key)] = decodeURIComponent(value);
        }
        return params;
    }

    // Get the username from the URL and display it
    const params = getQueryParams();
    const username = params.username;
    if (username) {
        document.getElementById('welcome-message').innerText = `Welcome, ${username}!`;
    } else {
        document.getElementById('welcome-message').innerText = 'Welcome, Guest!';
    }

    // Function to add another education entry
    document.getElementById('add-education').addEventListener('click', function() {
        const educationContainer = document.getElementById('education-container');
        const newEntry = document.createElement('div');
        newEntry.classList.add('education-entry');
        newEntry.innerHTML = `
            <label for="school">School:</label>
            <input type="text" class="school" placeholder="Enter your school name" /><br /><br />

            <label for="start-date">Start Date:</label>
            <input type="date" class="start-date" /><br /><br />

            <label for="end-date">End Date:</label>
            <input type="date" class="end-date" /><br /><br />

            <label for="gpa">GPA:</label>
            <input type="text" class="gpa" placeholder="Enter your GPA" /><br /><br />

            <label for="major">Major:</label>
            <input type="text" class="major" placeholder="Enter your major" /><br /><br />
            <button class="remove-education">Remove</button>
        `;
        educationContainer.appendChild(newEntry);

        // Add event listener for the new "Remove" button
        newEntry.querySelector('.remove-education').addEventListener('click', function() {
            educationContainer.removeChild(newEntry);
        });
    });

    // Initial "Remove" button functionality for education entries
    document.querySelectorAll('.remove-education').forEach(button => {
        button.addEventListener('click', function() {
            const educationEntry = button.parentElement;
            document.getElementById('education-container').removeChild(educationEntry);
        });
    });

    // Function to add another work entry
    document.getElementById('add-work').addEventListener('click', function() {
        const workContainer = document.getElementById('work-container');
        const newWorkEntry = document.createElement('div');
        newWorkEntry.classList.add('work-entry');
        newWorkEntry.innerHTML = `
            <label for="company">Company:</label>
            <input type="text" class="company" placeholder="Enter your company name" /><br /><br />

            <label for="key-roles">Key Roles:</label>
            <textarea class="key-roles" rows="2" cols="50" placeholder="Describe your key roles"></textarea><br /><br />

            <label for="work-start-date">Start Date:</label>
            <input type="date" class="work-start-date" /><br /><br />

            <label for="work-end-date">End Date:</label>
            <input type="date" class="work-end-date" /><br /><br />
            <button class="remove-work">Remove</button>
        `;
        workContainer.appendChild(newWorkEntry);

        // Add event listener for the new "Remove" button
        newWorkEntry.querySelector('.remove-work').addEventListener('click', function() {
            workContainer.removeChild(newWorkEntry);
        });
    });
    document.getElementById('add-language').addEventListener('click', function() {
        const languageContainer = document.getElementById('language-container');
        const newLanguageEntry = document.createElement('div');
        newLanguageEntry.classList.add('language-entry');
        newLanguageEntry.innerHTML = `
            <label for="language">Language:</label>
            <input type="text" class="language" placeholder="Enter a language" /><br /><br />
            
            <label for="native">Native:</label>
            <input type="checkbox" class="native" /><br /><br />

            <label for="proficiency">Proficiency Level:</label>
            <select class="proficiency">
                <option value="">Select proficiency</option>
                <option value="basic">Basic</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
                <option value="fluent">Fluent</option>
            </select><br /><br />
            
            <button class="remove-language">Remove</button>
        `;
        
        // Append the new language entry to the container
        languageContainer.appendChild(newLanguageEntry);

        // Add event listener for the "Native" checkbox
        const nativeCheckbox = newLanguageEntry.querySelector('.native');
        const proficiencySelect = newLanguageEntry.querySelector('.proficiency');

        nativeCheckbox.addEventListener('change', function() {
            if (nativeCheckbox.checked) {
                proficiencySelect.value = "fluent"; // Set proficiency to fluent
                proficiencySelect.disabled = true; // Optionally disable the dropdown
            } else {
                proficiencySelect.value = ""; // Reset the proficiency
                proficiencySelect.disabled = false; // Enable the dropdown again
            }
        });

        // Add event listener for the new "Remove" button
        newLanguageEntry.querySelector('.remove-language').addEventListener('click', function() {
            languageContainer.removeChild(newLanguageEntry);
        });
    });
</script>

<footer>
    <hr />
    <span class="text-reset">Kyle Boden</span>
    <br />
    <a href="https://github.com/kyleboden/startup/tree/main/startup-html">GitHub</a>
</footer>
</body>
</html>
